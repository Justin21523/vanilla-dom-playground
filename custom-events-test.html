<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è‡ªå®šç¾©äº‹ä»¶å·¥ä½œåŠæ¸¬è©¦ - Vanilla DOM Playground</title>
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/games.css">
  <style>
    body {
      margin: 0;
      padding: 20px;
      background: #ecf0f1;
      min-height: 100vh;
    }

    .test-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .test-header {
      text-align: center;
      margin-bottom: 30px;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .test-header h1 {
      margin: 0 0 10px 0;
      color: #2c3e50;
    }

    .test-header p {
      margin: 5px 0;
      color: #7f8c8d;
    }

    #tutorial-container {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div class="test-container">
    <div class="test-header">
      <h1>ğŸ¨ è‡ªå®šç¾©äº‹ä»¶å·¥ä½œåŠæ¸¬è©¦</h1>
      <p>ç´” Vanilla JavaScript å¯¦ç¾ï¼Œå­¸ç¿’å‰µå»ºå’Œä½¿ç”¨è‡ªå®šç¾©äº‹ä»¶</p>
      <p>
        <strong>å­¸ç¿’é‡é»ï¼š</strong>
        CustomEvent æ§‹é€ å‡½æ•¸ | detail å±¬æ€§ | dispatchEvent() | çµ„ä»¶é–“é€šä¿¡ | ç™¼å¸ƒ/è¨‚é–±æ¨¡å¼
      </p>
      <p style="margin-top: 10px; color: #667eea;">
        ğŸ¯ å¯¦æˆ°æ¼”ç·´ï¼šé€šéçµ„ä»¶é€šä¿¡æ¡ˆä¾‹ç†è§£è‡ªå®šç¾©äº‹ä»¶çš„å¯¦éš›æ‡‰ç”¨
      </p>
    </div>

    <div id="tutorial-container"></div>
  </div>

  <!-- æˆå°±ç³»çµ±è‡ªå‹•åˆå§‹åŒ– -->
  <script type="module" src="./js/learning/gamification/autoInit.js"></script>

  <script type="module">
    import { CustomEvents } from './js/learning/tutorials/customEvents.js';

    // åˆå§‹åŒ–æ•™ç¨‹
    const container = document.getElementById('tutorial-container');
    const tutorial = new CustomEvents(container);

    // è¿½è¹¤æ•™ç¨‹å®Œæˆï¼ˆç•¶ç”¨æˆ¶å‰µå»ºä¸¦è§¸ç™¼è‡³å°‘3å€‹è‡ªå®šç¾©äº‹ä»¶æ™‚ï¼‰
    let hasCompleted = false;

    const checkCompletion = setInterval(() => {
      // å‡è¨­æ•™ç¨‹æœ‰ customEventLog è¨˜éŒ„å‰µå»ºçš„è‡ªå®šç¾©äº‹ä»¶
      if (tutorial.customEventLog) {
        if (tutorial.customEventLog.length >= 3 && !hasCompleted) {
          hasCompleted = true;

          // è¿½è¹¤å®Œæˆ
          window.achievementAPI.complete('custom-events', {});

          console.log('ğŸ“Š Tutorial completed!', {
            customEventsCreated: tutorial.customEventLog.length
          });
        }
      }
    }, 2000);

    console.log('âœ… è‡ªå®šç¾©äº‹ä»¶å·¥ä½œåŠå·²åŠ è¼‰');
    console.log('ğŸ† æˆå°±ç³»çµ±å·²å•Ÿç”¨');
    console.log('ğŸ¨ å·¦å´å‰µå»ºå’Œç™¼é€äº‹ä»¶ï¼Œå³å´ç›£è½å’Œæ¥æ”¶');
    console.log('');
    console.log('ğŸ“š CustomEvent åŸºç¤ï¼š');
    console.log('  CustomEvent æ˜¯ Event çš„æ“´å±•ï¼Œå…è¨±å‚³éè‡ªå®šç¾©æ•¸æ“šã€‚');
    console.log('  é€™æ˜¯å¯¦ç¾çµ„ä»¶é–“é€šä¿¡çš„å¼·å¤§å·¥å…·ã€‚');
    console.log('');
    console.log('ğŸ’» å‰µå»ºè‡ªå®šç¾©äº‹ä»¶ï¼š');
    console.log('  const event = new CustomEvent(\'eventName\', {');
    console.log('    detail: { /* è‡ªå®šç¾©æ•¸æ“š */ },');
    console.log('    bubbles: true,        // æ˜¯å¦å†’æ³¡');
    console.log('    cancelable: true,     // æ˜¯å¦å¯å–æ¶ˆ');
    console.log('    composed: false       // æ˜¯å¦ç©¿é€ Shadow DOM');
    console.log('  });');
    console.log('');
    console.log('ğŸ“¤ è§¸ç™¼äº‹ä»¶ï¼š');
    console.log('  element.dispatchEvent(event);');
    console.log('');
    console.log('ğŸ“¥ ç›£è½äº‹ä»¶ï¼š');
    console.log('  element.addEventListener(\'eventName\', (e) => {');
    console.log('    console.log(e.detail); // è¨ªå•è‡ªå®šç¾©æ•¸æ“š');
    console.log('  });');
    console.log('');
    console.log('ğŸ¯ detail å±¬æ€§ï¼š');
    console.log('  â€¢ detail å¯ä»¥æ˜¯ä»»ä½• JavaScript å€¼ï¼ˆå°è±¡ã€æ•¸çµ„ã€å­—ç¬¦ä¸²ç­‰ï¼‰');
    console.log('  â€¢ é€šå¸¸ä½¿ç”¨å°è±¡ä¾†å‚³éå¤šå€‹æ•¸æ“š');
    console.log('  â€¢ ç›£è½å™¨é€šé e.detail è¨ªå•æ•¸æ“š');
    console.log('');
    console.log('ğŸ”§ äº‹ä»¶é¸é …ï¼š');
    console.log('  â€¢ bubbles - æ§åˆ¶äº‹ä»¶æ˜¯å¦å†’æ³¡åˆ°çˆ¶å…ƒç´ ');
    console.log('    - true: äº‹ä»¶æœƒå†’æ³¡ï¼ˆå¤§éƒ¨åˆ†æƒ…æ³æ¨è–¦ï¼‰');
    console.log('    - false: äº‹ä»¶ä¸å†’æ³¡ï¼ˆé»˜èªå€¼ï¼‰');
    console.log('');
    console.log('  â€¢ cancelable - æ§åˆ¶æ˜¯å¦å¯èª¿ç”¨ preventDefault()');
    console.log('    - true: å¯ä»¥é˜»æ­¢é»˜èªè¡Œç‚º');
    console.log('    - false: ç„¡æ³•é˜»æ­¢ï¼ˆé»˜èªå€¼ï¼‰');
    console.log('');
    console.log('  â€¢ composed - æ§åˆ¶äº‹ä»¶æ˜¯å¦ç©¿é€ Shadow DOM');
    console.log('    - true: ç©¿é€ Shadow DOM é‚Šç•Œ');
    console.log('    - false: ä¸ç©¿é€ï¼ˆé»˜èªå€¼ï¼‰');
    console.log('');
    console.log('ğŸŒŸ å¯¦éš›æ‡‰ç”¨å ´æ™¯ï¼š');
    console.log('');
    console.log('  1. çµ„ä»¶é–“é€šä¿¡ï¼š');
    console.log('     å­çµ„ä»¶è§¸ç™¼äº‹ä»¶ â†’ çˆ¶çµ„ä»¶ç›£è½éŸ¿æ‡‰');
    console.log('     ä¾‹å¦‚ï¼šproductSelected, userLoggedIn');
    console.log('');
    console.log('  2. ç‹€æ…‹è®ŠåŒ–é€šçŸ¥ï¼š');
    console.log('     æ•¸æ“šæ›´æ–°æ™‚é€šçŸ¥å…¶ä»–æ¨¡å¡Š');
    console.log('     ä¾‹å¦‚ï¼šdataUpdated, cartChanged');
    console.log('');
    console.log('  3. ç™¼å¸ƒ/è¨‚é–±æ¨¡å¼ï¼š');
    console.log('     è§£è€¦æ¨¡å¡Šé–“çš„ä¾è³´é—œä¿‚');
    console.log('     ä¾‹å¦‚ï¼šthemeChanged, languageChanged');
    console.log('');
    console.log('  4. è‡ªå®šç¾© UI çµ„ä»¶ï¼š');
    console.log('     å‰µå»ºå¯é‡ç”¨çš„çµ„ä»¶ä¸¦æä¾›äº‹ä»¶ API');
    console.log('     ä¾‹å¦‚ï¼šmodalClosed, tabSelected');
    console.log('');
    console.log('ğŸ’¡ æœ€ä½³å¯¦è¸ï¼š');
    console.log('  â€¢ äº‹ä»¶åä½¿ç”¨å°å¯«é§å³°å¼ï¼ˆcamelCaseï¼‰');
    console.log('  â€¢ äº‹ä»¶åè¦å…·æœ‰æè¿°æ€§ï¼ˆèªªæ˜ç™¼ç”Ÿäº†ä»€éº¼ï¼‰');
    console.log('  â€¢ é¿å…èˆ‡åŸç”Ÿäº‹ä»¶é‡åï¼ˆå¦‚ click, input ç­‰ï¼‰');
    console.log('  â€¢ detail æ•¸æ“šä¿æŒç°¡æ½”ï¼Œä¸è¦å‚³ééå¤§çš„å°è±¡');
    console.log('  â€¢ çµ„ä»¶éŠ·æ¯€æ™‚è¨˜å¾—ç§»é™¤ç›£è½å™¨ï¼ˆé˜²æ­¢å…§å­˜æ´©æ¼ï¼‰');
    console.log('  â€¢ è€ƒæ…®ä½¿ç”¨å‘½åç©ºé–“é¿å…è¡çªï¼ˆå¦‚ app:userLoginï¼‰');
    console.log('');
    console.log('âš ï¸ æ³¨æ„äº‹é …ï¼š');
    console.log('  â€¢ CustomEvent åœ¨ IE9+ æ”¯æŒ');
    console.log('  â€¢ èˆŠç€è¦½å™¨å¯èƒ½éœ€è¦ polyfill');
    console.log('  â€¢ ä¸è¦éåº¦ä½¿ç”¨ï¼Œç°¡å–®å ´æ™¯å¯ç”¨å›èª¿å‡½æ•¸');
    console.log('  â€¢ äº‹ä»¶ä¸æœƒè‡ªå‹•åºåˆ—åŒ–ï¼Œç„¡æ³•è·¨çª—å£å‚³é');
    console.log('  â€¢ è¨˜å¾—æª¢æŸ¥ event.isTrustedï¼ˆå€åˆ†çœŸå¯¦äº‹ä»¶ï¼‰');
    console.log('');
    console.log('ğŸ® äº’å‹•æ¸¬è©¦ï¼š');
    console.log('  1. é»æ“Šã€Œå¿«é€Ÿæ¸¬è©¦ã€æŒ‰éˆ• - ç™¼é€é è¨­äº‹ä»¶');
    console.log('  2. ä¿®æ”¹äº‹ä»¶å‰µå»ºå™¨ - è‡ªå®šç¾©äº‹ä»¶åå’Œæ•¸æ“š');
    console.log('  3. é»æ“Šç”¢å“é¸æ“‡ - è§€å¯Ÿçµ„ä»¶ A åˆ°çµ„ä»¶ B çš„é€šä¿¡');
    console.log('  4. æ·»åŠ è‡ªå®šç¾©ç›£è½å™¨ - ç›£è½ä»»æ„äº‹ä»¶');
    console.log('  5. æŸ¥çœ‹äº‹ä»¶æ—¥èªŒ - æ‰€æœ‰äº‹ä»¶çš„å®Œæ•´è¨˜éŒ„');
    console.log('');
    console.log('ğŸ“Š çµ„ä»¶é€šä¿¡æµç¨‹ï¼š');
    console.log('  çµ„ä»¶ A (ç”Ÿç”¢è€…)');
    console.log('    â†“ ç”¨æˆ¶é»æ“Šã€Œé¸æ“‡ã€æŒ‰éˆ•');
    console.log('    â†“ new CustomEvent(\'productSelected\', { detail: {...} })');
    console.log('    â†“ dispatchEvent(event)');
    console.log('    â†“ äº‹ä»¶å†’æ³¡åˆ°çˆ¶å®¹å™¨');
    console.log('  çµ„ä»¶ B (æ¶ˆè²»è€…)');
    console.log('    â†“ ç›£è½ \'productSelected\' äº‹ä»¶');
    console.log('    â†“ æ¥æ”¶ e.detail æ•¸æ“š');
    console.log('    â†“ æ›´æ–°è³¼ç‰©è»Š UI');
    console.log('');
    console.log('ğŸ” èª¿è©¦æŠ€å·§ï¼š');
    console.log('  â€¢ ä½¿ç”¨ console.log(e.detail) æŸ¥çœ‹å‚³éçš„æ•¸æ“š');
    console.log('  â€¢ æª¢æŸ¥ e.type ç¢ºèªäº‹ä»¶é¡å‹');
    console.log('  â€¢ é©—è­‰ e.bubbles ç¢ºèªå†’æ³¡è¨­ç½®');
    console.log('  â€¢ æŸ¥çœ‹ e.isTrusted å€åˆ†çœŸå¯¦/åˆæˆäº‹ä»¶');
  </script>
</body>
</html>
