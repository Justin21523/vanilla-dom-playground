<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>äº‹ä»¶å§”è¨—æ¼”ç¤ºæ¸¬è©¦ - Vanilla DOM Playground</title>
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/games.css">
  <style>
    body {
      margin: 0;
      padding: 20px;
      background: #ecf0f1;
      min-height: 100vh;
    }

    .test-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .test-header {
      text-align: center;
      margin-bottom: 30px;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .test-header h1 {
      margin: 0 0 10px 0;
      color: #2c3e50;
    }

    .test-header p {
      margin: 5px 0;
      color: #7f8c8d;
    }

    #tutorial-container {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div class="test-container">
    <div class="test-header">
      <h1>ğŸ¯ äº‹ä»¶å§”è¨—æ¼”ç¤ºæ¸¬è©¦</h1>
      <p>ç´” Vanilla JavaScript å¯¦ç¾ï¼Œå°æ¯”ç›´æ¥ç¶å®šèˆ‡å§”è¨—ç¶å®š</p>
      <p>
        <strong>å­¸ç¿’é‡é»ï¼š</strong>
        äº‹ä»¶å§”è¨—åŸç† | ç›´æ¥ç¶å®š vs å§”è¨—ç¶å®š | event.target.matches() | æ€§èƒ½å„ªåŒ– | å‹•æ…‹å…ƒç´ è™•ç†
      </p>
      <p style="margin-top: 10px; color: #667eea;">
        âš¡ æ€§èƒ½å°æ¯”ï¼šè§€å¯Ÿå…©ç¨®ç¶å®šæ–¹å¼çš„è¨˜æ†¶é«”ä½¿ç”¨å’ŒéŸ¿æ‡‰æ™‚é–“å·®ç•°
      </p>
    </div>

    <div id="tutorial-container"></div>
  </div>

  <!-- æˆå°±ç³»çµ±è‡ªå‹•åˆå§‹åŒ– -->
  <script type="module" src="./js/learning/gamification/autoInit.js"></script>

  <script type="module">
    import { EventDelegation } from './js/learning/tutorials/eventDelegation.js';

    // åˆå§‹åŒ–æ•™ç¨‹
    const container = document.getElementById('tutorial-container');
    const tutorial = new EventDelegation(container);

    // è¿½è¹¤æ•™ç¨‹å®Œæˆï¼ˆç•¶ç”¨æˆ¶åœ¨å…©å´éƒ½æ·»åŠ è‡³å°‘5å€‹é …ç›®ä¸¦é»æ“Šå®ƒå€‘æ™‚ï¼‰
    let hasCompleted = false;

    const checkCompletion = setInterval(() => {
      // å‡è¨­æ•™ç¨‹æœ‰ directItems å’Œ delegatedItems è¨ˆæ•¸
      if (tutorial.directItems && tutorial.delegatedItems) {
        const bothSidesUsed = tutorial.directItems.length >= 3 &&
                              tutorial.delegatedItems.length >= 3;

        if (bothSidesUsed && !hasCompleted) {
          hasCompleted = true;

          // è¿½è¹¤å®Œæˆ
          window.achievementAPI.complete('event-delegation', {});

          console.log('ğŸ“Š Tutorial completed!', {
            directItems: tutorial.directItems.length,
            delegatedItems: tutorial.delegatedItems.length
          });
        }
      }
    }, 2000);

    console.log('âœ… äº‹ä»¶å§”è¨—æ¼”ç¤ºå·²åŠ è¼‰');
    console.log('ğŸ† æˆå°±ç³»çµ±å·²å•Ÿç”¨');
    console.log('ğŸ¯ å·¦å´ä½¿ç”¨ç›´æ¥ç¶å®šï¼Œå³å´ä½¿ç”¨å§”è¨—ç¶å®š');
    console.log('');
    console.log('ğŸ“š äº‹ä»¶å§”è¨—åŸç†ï¼š');
    console.log('  äº‹ä»¶å§”è¨—åˆ©ç”¨äº‹ä»¶å†’æ³¡æ©Ÿåˆ¶ï¼Œå°‡å¤šå€‹å­å…ƒç´ çš„äº‹ä»¶ç›£è½å™¨');
    console.log('  çµ±ä¸€æ·»åŠ åˆ°çˆ¶å…ƒç´ ä¸Šï¼Œé€šé event.target åˆ¤æ–·å¯¦éš›è§¸ç™¼è€…ã€‚');
    console.log('');
    console.log('âŒ ç›´æ¥ç¶å®šæ–¹å¼ï¼š');
    console.log('  const buttons = document.querySelectorAll(\'.button\');');
    console.log('  buttons.forEach(btn => {');
    console.log('    btn.addEventListener(\'click\', handleClick);');
    console.log('  });');
    console.log('');
    console.log('  å•é¡Œï¼š');
    console.log('  â€¢ æ¯å€‹æŒ‰éˆ•éƒ½éœ€è¦ä¸€å€‹ç¨ç«‹çš„ç›£è½å™¨');
    console.log('  â€¢ æ–°æ·»åŠ çš„æŒ‰éˆ•éœ€è¦æ‰‹å‹•ç¶å®šäº‹ä»¶');
    console.log('  â€¢ åˆªé™¤å…ƒç´ æ™‚éœ€è¦æ‰‹å‹•è§£ç¶é¿å…è¨˜æ†¶é«”æ´©æ¼');
    console.log('  â€¢ å¤§é‡å…ƒç´ æ™‚è¨˜æ†¶é«”æ¶ˆè€—å¤§');
    console.log('');
    console.log('âœ… å§”è¨—ç¶å®šæ–¹å¼ï¼š');
    console.log('  const container = document.querySelector(\'.container\');');
    console.log('  container.addEventListener(\'click\', (e) => {');
    console.log('    if (e.target.matches(\'.button\')) {');
    console.log('      handleClick(e);');
    console.log('    }');
    console.log('  });');
    console.log('');
    console.log('  å„ªå‹¢ï¼š');
    console.log('  â€¢ åªéœ€ä¸€å€‹ç›£è½å™¨ï¼Œè¨˜æ†¶é«”æ¶ˆè€—ä½');
    console.log('  â€¢ æ–°æ·»åŠ çš„å…ƒç´ è‡ªå‹•ç”Ÿæ•ˆ');
    console.log('  â€¢ ç„¡éœ€æ‰‹å‹•è§£ç¶ï¼Œè‡ªå‹•ç®¡ç†');
    console.log('  â€¢ é©åˆå‹•æ…‹å…§å®¹å’Œå¤§é‡å…ƒç´ ');
    console.log('');
    console.log('ğŸ” é—œéµ APIï¼š');
    console.log('  â€¢ event.target - å¯¦éš›è§¸ç™¼äº‹ä»¶çš„å…ƒç´ ');
    console.log('  â€¢ element.matches(selector) - æª¢æŸ¥å…ƒç´ æ˜¯å¦åŒ¹é…é¸æ“‡å™¨');
    console.log('  â€¢ element.closest(selector) - æ‰¾æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ ');
    console.log('');
    console.log('ğŸ’¡ ä½¿ç”¨æŠ€å·§ï¼š');
    console.log('  1. æ·»åŠ å¤šå€‹é …ç›® - è§€å¯Ÿç›£è½å™¨æ•¸é‡è®ŠåŒ–');
    console.log('  2. é»æ“Šé …ç›®æŒ‰éˆ• - è§€å¯ŸéŸ¿æ‡‰æ™‚é–“');
    console.log('  3. åˆªé™¤é …ç›® - å·¦å´éœ€æ‰‹å‹•è§£ç¶ï¼Œå³å´è‡ªå‹•è™•ç†');
    console.log('  4. æ€§èƒ½å°æ¯” - è¨˜æ†¶é«”ä½¿ç”¨æ¢å½¢åœ–å¯¦æ™‚æ›´æ–°');
    console.log('');
    console.log('ğŸ¯ å¯¦éš›æ‡‰ç”¨å ´æ™¯ï¼š');
    console.log('  â€¢ TODO åˆ—è¡¨ï¼ˆå‹•æ…‹æ·»åŠ /åˆªé™¤é …ç›®ï¼‰');
    console.log('  â€¢ è¡¨æ ¼æ’åº/ç¯©é¸ï¼ˆå¤§é‡è¡Œå’Œå–®å…ƒæ ¼ï¼‰');
    console.log('  â€¢ ç„¡é™æ»¾å‹•åˆ—è¡¨ï¼ˆæŒçºŒæ·»åŠ æ–°å…§å®¹ï¼‰');
    console.log('  â€¢ å‹•æ…‹è¡¨å–®ï¼ˆå¯æ·»åŠ /ç§»é™¤å­—æ®µï¼‰');
    console.log('  â€¢ è©•è«–ç³»çµ±ï¼ˆå›è¦†ã€åˆªé™¤ã€é»è®šæŒ‰éˆ•ï¼‰');
    console.log('');
    console.log('âš ï¸ æ³¨æ„äº‹é …ï¼š');
    console.log('  â€¢ æŸäº›äº‹ä»¶ä¸å†’æ³¡ï¼ˆfocus, blur, load, scrollç­‰ï¼‰');
    console.log('  â€¢ éœ€è¦æ­£ç¢ºåˆ¤æ–· event.target');
    console.log('  â€¢ stopPropagation() æœƒé˜»æ–·å§”è¨—');
    console.log('  â€¢ ç°¡å–®å ´æ™¯ç›´æ¥ç¶å®šæ›´æ¸…æ™°');
  </script>
</body>
</html>
